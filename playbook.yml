---
- hosts: all
  sudo: true
  gather_facts: no
  # remote_user: root
  vars:
    document_root: /vagrant
  pre_tasks:
    # - name: Install python 2.7 
    #   raw: apt-get update -qq && apt-get install -qq python2.7

    # - name: check if softlink exists
    #   stat:
    #     path: /usr/bin/python
    #   register: python_file

    # - name: create softlink for python 2.7
    #   raw: ln -s /usr/bin/python2.7 /usr/bin/python
    #   when: python_file.stat.islnk is not defined
    - name: install python 2
      raw: test -e /usr/bin/python || (apt -y update && apt install -y python-minimal)

    - name: update apt cache
      apt: update_cache=yes

    - name: installing repo for Java 8 in Ubuntu
      apt_repository: repo='ppa:openjdk-r/ppa'


  roles:    
     - hadoop
     - role: geerlingguy.java
       when: "ansible_os_family == 'Debian'"
       java_packages:
         - openjdk-8-jdk
